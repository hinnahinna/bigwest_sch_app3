<% provide(:title, "シフト申請") %>
<div class="row">
  <div class="col-md-6">
    <%= form_with model: @requestschedule, local: true  do |f| %>
    <%#formwith完成形はremote trueにしてAjax処理にする form_with model: @requestschedule do |f| %>
      <h3>シフト申請</h3>
      <p>■シフト申請者：<%= current_user.username %></p>

      <div class="field">
        <%= f.label :シフト申請先店舗 %><br />
        <%= f.collection_select :store_id, Store.all, :id, :storename %>
      </div>
      <p>■カレンダーからシフト申請する日を選択してください</p>
      <div class="field">
        <%= f.label :シフト申請日 %><br />
        <%= f.date_field :request_day %>
      </div>
      <div class="field request_timezone">
        <%= f.label :シフト勤務時間帯 %><br />
         ★Aとかの右の時間帯の部分は別枠に移動する？店舗ごとに差異があるので
        <p>A  (06:00-09:00): <%= f.check_box :request_timezone ,{ multiple: true }, "A" , nil %></p>
        <p>B  (09:00-13:00): <%= f.check_box :request_timezone ,{ multiple: true }, "B" , nil %></p>
        <p>C  (13:00-17:00): <%= f.check_box :request_timezone ,{ multiple: true }, "C" , nil %></p>
        <p>D  (17:00-21:00): <%= f.check_box :request_timezone ,{ multiple: true }, "D" , nil %></p>
        <p>E1 (21:00-01:00): <%= f.check_box :request_timezone ,{ multiple: true }, "E1", nil %></p>
        <p>E3 (21:00-03:00): <%= f.check_box :request_timezone ,{ multiple: true }, "E3", nil %></p>
        <p>E  (21:00-06:00): <%= f.check_box :request_timezone ,{ multiple: true }, "E" , nil %></p>
      </div>
      <p>■チェックボックス外の時間を申請する場合は下記に時間を入力してください。</p>
      <div class="field">
        <%= f.label :シフト申請時間（開始） %>
        <%= f.select :request_start_time, ['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23'], {include_blank: true} %>時
      </div>
      <div class="field">
        <%= f.label :シフト申請時間（終了） %>
        <%= f.select :request_end_time,   ['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23'], {include_blank: true} %>時
      </div>

      <p>■指定したシフトを確認後、申請ボタンを押してください。</p>
      <%= f.submit "シフト申請", class: "btn btn-primary" %>
    <% end %>
  </div>
  <div class="col-md-6">
    <h3>申請済みシフト欄</h3>
    <div>
      <p>★ここに申請済みシフトをDBから一覧表示（Micropostsを参考に,承認されたやつだけマークつける）</p>
      <p>★申請したシフトは年月で検索可能、申請時間の横にどの店のシフトかも表示</p>
      <table class="schtable table-bordered table-striped table-responsive">
        <tr>
          <th>申請者</th>
          <th>店舗</th>
          <th>申請日</th>
          <th>申請時間帯</th>
          <th>承認可否</th>
        </tr>
        <% @schedules.each do |schedule| %>
          <tr class="schedules_<%= schedule.id %>">
            <%= render partial: "pages/request", locals: { schedule: schedule} %>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>
